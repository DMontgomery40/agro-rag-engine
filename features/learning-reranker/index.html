<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-features/learning-reranker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Learning Reranker System | AGRO Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dmontgomery40.github.io/agro-rag-engine/img/agro-social.png"><meta data-rh="true" name="twitter:image" content="https://dmontgomery40.github.io/agro-rag-engine/img/agro-social.png"><meta data-rh="true" property="og:url" content="https://dmontgomery40.github.io/agro-rag-engine/features/learning-reranker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Learning Reranker System | AGRO Documentation"><meta data-rh="true" name="description" content="AGRO&#x27;s learning reranker is a complete ML pipeline that continuously improves search quality by collecting user feedback and training a cross-encoder model specifically on YOUR codebase."><meta data-rh="true" property="og:description" content="AGRO&#x27;s learning reranker is a complete ML pipeline that continuously improves search quality by collecting user feedback and training a cross-encoder model specifically on YOUR codebase."><link data-rh="true" rel="icon" href="/agro-rag-engine/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://dmontgomery40.github.io/agro-rag-engine/features/learning-reranker"><link data-rh="true" rel="alternate" href="https://dmontgomery40.github.io/agro-rag-engine/features/learning-reranker" hreflang="en"><link data-rh="true" rel="alternate" href="https://dmontgomery40.github.io/agro-rag-engine/features/learning-reranker" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YOUR_APP_ID-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Learning Reranker System","item":"https://dmontgomery40.github.io/agro-rag-engine/features/learning-reranker"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="AGRO Documentation" href="/agro-rag-engine/opensearch.xml"><link rel="stylesheet" href="/agro-rag-engine/assets/css/styles.1a1fe8cb.css">
<script src="/agro-rag-engine/assets/js/runtime~main.34578a38.js" defer="defer"></script>
<script src="/agro-rag-engine/assets/js/main.58efc273.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/agro-rag-engine/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/agro-rag-engine/"><div class="navbar__logo"><img src="/agro-rag-engine/img/logo.svg" alt="AGRO Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/agro-rag-engine/img/logo.svg" alt="AGRO Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AGRO</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/agro-rag-engine/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/DMontgomery40/agro-rag-engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/agro-rag-engine/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/agro-rag-engine/getting-started/quickstart"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/getting-started/quickstart"><span title="Quick Start" class="linkLabel_WmDU">Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/getting-started/installation"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/getting-started/first-steps"><span title="First Steps" class="linkLabel_WmDU">First Steps</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/agro-rag-engine/features/rag"><span title="Core Features" class="categoryLinkLabel_W154">Core Features</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/features/rag"><span title="RAG System" class="linkLabel_WmDU">RAG System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/agro-rag-engine/features/learning-reranker"><span title="Learning Reranker System" class="linkLabel_WmDU">Learning Reranker System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/features/mcp"><span title="MCP Integration" class="linkLabel_WmDU">MCP Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/agro-rag-engine/features/chat-interface"><span title="Chat Interface" class="linkLabel_WmDU">Chat Interface</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/agro-rag-engine/api/reference"><span title="API Reference" class="categoryLinkLabel_W154">API Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/agro-rag-engine/configuration/models"><span title="Configuration" class="categoryLinkLabel_W154">Configuration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/agro-rag-engine/development/contributing"><span title="Development" class="categoryLinkLabel_W154">Development</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/agro-rag-engine/operations/deployment"><span title="Operations" class="categoryLinkLabel_W154">Operations</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/agro-rag-engine/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Features</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Learning Reranker System</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Learning Reranker System</h1></header>
<p>AGRO&#x27;s learning reranker is a <strong>complete ML pipeline</strong> that continuously improves search quality by collecting user feedback and training a cross-encoder model specifically on YOUR codebase.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-it-does">What It Does<a href="#what-it-does" class="hash-link" aria-label="Direct link to What It Does" title="Direct link to What It Does" translate="no">​</a></h2>
<p>The learning reranker transforms AGRO from a static search system into one that <strong>learns from every interaction</strong>:</p>
<ol>
<li class=""><strong>Collects implicit feedback</strong> - Tracks which code chunks you click on</li>
<li class=""><strong>Collects explicit feedback</strong> - Thumbs up/down buttons on search results</li>
<li class=""><strong>Mines training data</strong> - Extracts triplets (query, good_doc, bad_doc) from feedback logs</li>
<li class=""><strong>Trains cross-encoder</strong> - Fine-tunes a reranking model on your codebase patterns</li>
<li class=""><strong>Evaluates improvements</strong> - Measures ranking quality with MRR and Hit@K metrics</li>
<li class=""><strong>Promotes models automatically</strong> - Deploys better models to production with hot-reload</li>
</ol>
<p>This creates a <strong>feedback loop</strong> where AGRO gets better at finding the code you actually need over time, not just what worked for someone else&#x27;s repository.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-reranking-works">How Reranking Works<a href="#how-reranking-works" class="hash-link" aria-label="Direct link to How Reranking Works" title="Direct link to How Reranking Works" translate="no">​</a></h2>
<p>In the retrieval flow, reranking happens at the crucial final stage:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">User Query: &quot;Where is OAuth validated?&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BM25 Search (keyword matching)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → Finds 100 candidates with &quot;OAuth&quot;, &quot;validate&quot;, &quot;token&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Vector Search (semantic similarity)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → Finds 100 candidates semantically similar to query</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Fusion (combine BM25 + Vector scores via RRF)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → Merged list of ~150 unique candidates</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cross-Encoder Rerank ← THE LEARNING RERANKER IS HERE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → Scores each (query, document) pair: 0.0 to 1.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → &quot;How relevant is this code to this specific question?&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Top K Results (sorted by rerank score)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → auth/oauth.py:45-67 (0.94)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → middleware/token.py:89-120 (0.87)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   → server/auth.py:120-145 (0.78)</span><br></span></code></pre></div></div>
<p>The cross-encoder takes each <code>(query, document)</code> pair and outputs a relevance score from 0.0 to 1.0. Unlike BM25 (keyword matching) or vector similarity (general semantic similarity), the cross-encoder is trained to understand: <strong>&quot;Is THIS specific code chunk the answer to THIS specific question in THIS codebase?&quot;</strong></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="training-data-format">Training Data Format<a href="#training-data-format" class="hash-link" aria-label="Direct link to Training Data Format" title="Direct link to Training Data Format" translate="no">​</a></h2>
<p>Training uses <strong>triplets</strong>: a query, a positive example (good answer), and negative examples (bad answers):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;query&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;How is OAuth token validated?&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;positive_text&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;function validateToken(token) { const decoded = jwt.verify(token, SECRET); return checkExpiry(decoded); }&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;positive_doc_id&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;auth/oauth.ts:45-67&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;negative_texts&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;import axios from &#x27;axios&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;export default config&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;negative_doc_ids&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;utils/http.ts:1-3&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;config/index.ts:10-12&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;source&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;click_feedback&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<p>The model learns: <strong>positive_text</strong> is more relevant to <strong>query</strong> than <strong>negative_texts</strong>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="gui-features">GUI Features<a href="#gui-features" class="hash-link" aria-label="Direct link to GUI Features" title="Direct link to GUI Features" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="feedback-collection">Feedback Collection<a href="#feedback-collection" class="hash-link" aria-label="Direct link to Feedback Collection" title="Direct link to Feedback Collection" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Learning Reranker Interface" src="/agro-rag-engine/assets/images/learning reranker pt 1-347ddd3e34525fbc12dfc48546e5a2a5.png" width="2155" height="1198" class="img_ev3q"></p>
<p>The reranker GUI (<code>gui/js/reranker.js</code> - 28KB of features) adds:</p>
<ul>
<li class=""><strong>Click tracking</strong> - Automatically logs when you click a code chunk (implicit positive signal)</li>
<li class=""><strong>Thumbs up/down buttons</strong> - Explicitly mark results as helpful or not helpful</li>
<li class=""><strong>Real-time feedback</strong> - Sends events to <code>/api/telemetry/event</code> immediately</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Reranker Training Progress" src="/agro-rag-engine/assets/images/learning reranker pt 2-54a35d954cdea7199ffdb48420e1d9b1.png" width="2179" height="1174" class="img_ev3q"></p>
<p>Every click or rating generates an event like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;event_id&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;abc-123-def&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;query&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;where is auth validated&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;doc_id&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;auth/oauth.ts:45-67&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;rating&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;source&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;click&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;2025-10-15T14:32:10.123Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<p><strong>Rating values:</strong></p>
<ul>
<li class=""><code>5</code> = thumbs up or clicked result</li>
<li class=""><code>1</code> = thumbs down</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-use-feedback">How to Use Feedback<a href="#how-to-use-feedback" class="hash-link" aria-label="Direct link to How to Use Feedback" title="Direct link to How to Use Feedback" translate="no">​</a></h3>
<ol>
<li class=""><strong>Search for something</strong> in AGRO</li>
<li class=""><strong>Click on a helpful result</strong> → automatically logged as positive feedback</li>
<li class=""><strong>Click thumbs up</strong> on great results → explicitly marked as excellent</li>
<li class=""><strong>Click thumbs down</strong> on bad results → explicitly marked as not relevant</li>
</ol>
<p>All feedback goes to <code>data/logs/queries.jsonl</code> for later mining into training data.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-training-workflow">Complete Training Workflow<a href="#complete-training-workflow" class="hash-link" aria-label="Direct link to Complete Training Workflow" title="Direct link to Complete Training Workflow" translate="no">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Reranker Full Pipeline" src="/agro-rag-engine/assets/images/learning reranker pt 3-0ecd54c9e9ac7c9e29c08f02acf0e351.png" width="2183" height="1349" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-mine-triplets">Step 1: Mine Triplets<a href="#step-1-mine-triplets" class="hash-link" aria-label="Direct link to Step 1: Mine Triplets" title="Direct link to Step 1: Mine Triplets" translate="no">​</a></h3>
<p>Generate training data from feedback logs or golden test questions.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-logged-queries">From Logged Queries<a href="#from-logged-queries" class="hash-link" aria-label="Direct link to From Logged Queries" title="Direct link to From Logged Queries" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Mines triplets from data/logs/queries.jsonl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/mine_triplets.py</span><br></span></code></pre></div></div>
<p>This looks for queries where users rated results (clicks or thumbs up/down), then creates triplets with:</p>
<ul>
<li class=""><strong>Positives</strong>: Results rated 4-5 stars (thumbs up, clicks)</li>
<li class=""><strong>Negatives</strong>: Results rated 1-2 stars (thumbs down) or unclicked</li>
</ul>
<p>Output: <code>data/training/triplets.jsonl</code></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-golden-questions">From Golden Questions<a href="#from-golden-questions" class="hash-link" aria-label="Direct link to From Golden Questions" title="Direct link to From Golden Questions" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Mines triplets from golden.json test questions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/mine_from_golden.py</span><br></span></code></pre></div></div>
<p>This runs each golden question through retrieval and creates triplets by matching results against <code>expect_paths</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;q&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;How is OAuth validated?&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;repo&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;agro&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;expect_paths&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;auth&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;oauth&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;token&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Positives</strong>: Docs where <code>file_path</code> contains any <code>expect_paths</code> substring</li>
<li class=""><strong>Negatives</strong>: Docs that don&#x27;t match</li>
</ul>
<p>This is <strong>great for bootstrapping</strong> training data when you don&#x27;t have enough logged queries yet.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-train-model">Step 2: Train Model<a href="#step-2-train-model" class="hash-link" aria-label="Direct link to Step 2: Train Model" title="Direct link to Step 2: Train Model" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Train cross-encoder on triplets.jsonl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/train_reranker.py</span><br></span></code></pre></div></div>
<p>This:</p>
<ol>
<li class="">Loads <code>data/training/triplets.jsonl</code></li>
<li class="">Fine-tunes a cross-encoder (default: BAAI/bge-reranker-v2-m3)</li>
<li class="">Saves model to <code>models/cross-encoder-agro-YYYYMMDD-HHMMSS/</code></li>
</ol>
<p>Training uses <strong>triplet loss</strong>: pushes positive docs closer to query embedding, negative docs farther away.</p>
<p><strong>Training output:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Loading triplets from data/training/triplets.jsonl</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Found 127 triplets</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Training cross-encoder on 127 examples</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Epoch 1/3: loss=0.42</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Epoch 2/3: loss=0.28</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Epoch 3/3: loss=0.19</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Model saved to models/cross-encoder-agro-20251015-143210/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-evaluate">Step 3: Evaluate<a href="#step-3-evaluate" class="hash-link" aria-label="Direct link to Step 3: Evaluate" title="Direct link to Step 3: Evaluate" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Test the trained model on golden.json questions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/eval_reranker.py </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> models/cross-encoder-agro-20251015-143210</span><br></span></code></pre></div></div>
<p><strong>Metrics:</strong></p>
<ul>
<li class="">
<p><strong>MRR (Mean Reciprocal Rank)</strong>: Average of <code>1/rank</code> where rank is position of first correct result</p>
<ul>
<li class="">1.0 = perfect (correct result always #1)</li>
<li class="">0.5 = typically rank #2</li>
<li class="">0.33 = typically rank #3</li>
</ul>
</li>
<li class="">
<p><strong>Hit@K</strong>: Percentage of queries where any correct result appears in top K</p>
<ul>
<li class="">Hit@1 = 80% means 80% of queries have correct answer in #1 position</li>
<li class="">Hit@5 = 95% means 95% have correct answer in top 5</li>
</ul>
</li>
</ul>
<p><strong>Example output:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Evaluating model: models/cross-encoder-agro-20251015-143210</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Golden questions: 79</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">MRR: 0.847</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Hit@1: 76.2%</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Hit@3: 90.5%</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Hit@5: 95.2%</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Hit@10: 98.1%</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Evaluation saved to data/evals/latest.json</span><br></span></code></pre></div></div>
<p>Results are saved to <code>data/evals/latest.json</code> with human-readable timestamps.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-promote-to-production">Step 4: Promote to Production<a href="#step-4-promote-to-production" class="hash-link" aria-label="Direct link to Step 4: Promote to Production" title="Direct link to Step 4: Promote to Production" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Deploy if eval scores are good enough</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/promote_reranker.py </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> models/cross-encoder-agro-20251015-143210</span><br></span></code></pre></div></div>
<p>This:</p>
<ol>
<li class="">Checks you have at least 30 triplets (can override with <code>--min N</code>)</li>
<li class="">Verifies eval metrics exist</li>
<li class="">Copies model to <code>models/cross-encoder-agro/</code> (production path)</li>
</ol>
<p>The server will <strong>auto-reload the new model within 60 seconds</strong> (hot-reload, no restart needed).</p>
<p><strong>Promotion output:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Checking model: models/cross-encoder-agro-20251015-143210</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Found 127 training triplets (&gt;= 30)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Evaluation metrics present</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ MRR: 0.847 (excellent)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Hit@5: 95.2% (excellent)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Promoting to production: models/cross-encoder-agro/</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Model promoted successfully</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">✓ Server will auto-reload within 60 seconds</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-endpoints">API Endpoints<a href="#api-endpoints" class="hash-link" aria-label="Direct link to API Endpoints" title="Direct link to API Endpoints" translate="no">​</a></h2>
<p>All reranker management is available via HTTP API.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="get-model-info">Get Model Info<a href="#get-model-info" class="hash-link" aria-label="Direct link to Get Model Info" title="Direct link to Get Model Info" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/info</span><br></span></code></pre></div></div>
<p><strong>Response:</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;model_path&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;models/cross-encoder-agro&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;backend&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sentence-transformers&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;loaded&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;last_check&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Oct 15, 2025 2:32 PM&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;eval_metrics&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;mrr&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.847</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;hit_at_5&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.952</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mine-triplets">Mine Triplets<a href="#mine-triplets" class="hash-link" aria-label="Direct link to Mine Triplets" title="Direct link to Mine Triplets" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/mine</span><br></span></code></pre></div></div>
<p>Runs <code>mine_triplets.py</code> in background. Check status:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/status</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="train-model">Train Model<a href="#train-model" class="hash-link" aria-label="Direct link to Train Model" title="Direct link to Train Model" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/train</span><br></span></code></pre></div></div>
<p>Runs <code>train_reranker.py</code> in background.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="evaluate-model">Evaluate Model<a href="#evaluate-model" class="hash-link" aria-label="Direct link to Evaluate Model" title="Direct link to Evaluate Model" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Evaluate specific model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/evaluate </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-H</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-d</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;{&quot;model_path&quot;: &quot;models/cross-encoder-agro-20251015-143210&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Or evaluate current production model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/evaluate</span><br></span></code></pre></div></div>
<p>Get latest eval results:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/eval/latest</span><br></span></code></pre></div></div>
<p><strong>Response:</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Oct 15, 2025 2:45 PM&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;model_path&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;models/cross-encoder-agro&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;metrics&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;mrr&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.847</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;hit_at_1&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.762</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;hit_at_3&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.905</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;hit_at_5&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.952</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;hit_at_10&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.981</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;total_questions&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">79</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="view-logs">View Logs<a href="#view-logs" class="hash-link" aria-label="Direct link to View Logs" title="Direct link to View Logs" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/logs</span><br></span></code></pre></div></div>
<p>Returns last 100 lines of background job output (mine/train/eval).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="environment-variables">Environment Variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment Variables" title="Direct link to Environment Variables" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Model path (default: models/cross-encoder-agro)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">AGRO_RERANKER_MODEL_PATH</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">models/my-custom-reranker</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Backend (default: sentence-transformers)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">AGRO_RERANKER_BACKEND</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">sentence-transformers</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Log path for feedback events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">AGRO_LOG_PATH</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">data/logs/queries.jsonl</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Hot-reload interval (default: 60 seconds)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">AGRO_RERANKER_RELOAD_INTERVAL</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">30</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="model-hot-reloading">Model Hot-Reloading<a href="#model-hot-reloading" class="hash-link" aria-label="Direct link to Model Hot-Reloading" title="Direct link to Model Hot-Reloading" translate="no">​</a></h3>
<p>The server checks every 60 seconds if <code>models/cross-encoder-agro/</code> has been updated (via mtime). When it detects changes, it automatically reloads the new model without restarting.</p>
<p><strong>This means:</strong></p>
<ol>
<li class="">Train a new model → saves to <code>models/cross-encoder-agro-TIMESTAMP/</code></li>
<li class="">Evaluate it → <code>python scripts/eval_reranker.py --model models/cross-encoder-agro-TIMESTAMP</code></li>
<li class="">Promote it → <code>python scripts/promote_reranker.py --model models/cross-encoder-agro-TIMESTAMP</code></li>
<li class=""><strong>Wait ~60 seconds</strong> → server auto-reloads</li>
<li class="">New searches use new model</li>
</ol>
<p><strong>No server restart required.</strong></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-training-example">Complete Training Example<a href="#complete-training-example" class="hash-link" aria-label="Direct link to Complete Training Example" title="Direct link to Complete Training Example" translate="no">​</a></h2>
<p>Here&#x27;s a full cycle from scratch:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># 1. Mine training data from golden.json (great for bootstrapping)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/mine_from_golden.py</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Output: Mined 79 triplets from 79 golden questions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 2. Train cross-encoder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/train_reranker.py</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Output: Trained model saved to models/cross-encoder-agro-20251015-143210/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 3. Evaluate on golden questions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/eval_reranker.py </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> models/cross-encoder-agro-20251015-143210</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Output: MRR: 0.847, Hit@1: 76.2%, Hit@5: 95.2%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 4. Promote to production</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/promote_reranker.py </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> models/cross-encoder-agro-20251015-143210</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Output: ✓ Promoted to models/cross-encoder-agro/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 5. Wait for hot-reload (or restart server)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Server will auto-load new model within 60 seconds</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="continuous-improvement-loop">Continuous Improvement Loop<a href="#continuous-improvement-loop" class="hash-link" aria-label="Direct link to Continuous Improvement Loop" title="Direct link to Continuous Improvement Loop" translate="no">​</a></h2>
<p>Set up a weekly or monthly training cycle:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Weekly or after collecting more feedback:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 1. Mine new triplets from usage logs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/mine</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 2. Train new model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/train</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 3. Check logs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/logs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 4. Evaluate (once training completes)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST http://localhost:8012/api/reranker/evaluate</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 5. Check metrics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> http://localhost:8012/api/reranker/eval/latest</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 6. If metrics improved, promote the model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">python scripts/promote_reranker.py </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> models/cross-encoder-agro-TIMESTAMP</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="only-1-triplets--30-abort">&quot;Only 1 triplets (&lt; 30); abort&quot;<a href="#only-1-triplets--30-abort" class="hash-link" aria-label="Direct link to &quot;Only 1 triplets (&lt; 30); abort&quot;" title="Direct link to &quot;Only 1 triplets (&lt; 30); abort&quot;" translate="no">​</a></h3>
<p>You need at least 30 training examples. Options:</p>
<ol>
<li class=""><strong>Mine from golden.json</strong>: <code>python scripts/mine_from_golden.py</code> (generates ~1 triplet per question with expect_paths)</li>
<li class=""><strong>Collect more feedback</strong>: Use AGRO more, click on results, use thumbs up/down buttons</li>
<li class=""><strong>Lower threshold temporarily</strong>: <code>python scripts/promote_reranker.py --min 1</code> (not recommended for production)</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="no-feedback-events-logged">&quot;No feedback events logged&quot;<a href="#no-feedback-events-logged" class="hash-link" aria-label="Direct link to &quot;No feedback events logged&quot;" title="Direct link to &quot;No feedback events logged&quot;" translate="no">​</a></h3>
<p>Check:</p>
<ul>
<li class="">Is reranker.js loaded in GUI? (look for feedback buttons on search results)</li>
<li class="">Are events being sent? (check browser console for POST to <code>/api/telemetry/event</code>)</li>
<li class="">Is telemetry enabled? (check <code>data/logs/queries.jsonl</code> exists and is writable)</li>
<li class="">Are you actually clicking on results? (passive browsing doesn&#x27;t generate feedback)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="model-not-reloading">&quot;Model not reloading&quot;<a href="#model-not-reloading" class="hash-link" aria-label="Direct link to &quot;Model not reloading&quot;" title="Direct link to &quot;Model not reloading&quot;" translate="no">​</a></h3>
<ul>
<li class="">Wait 60 seconds after promoting (hot-reload interval)</li>
<li class="">Or restart server: <code>pkill -f &quot;uvicorn.*app:app&quot; &amp;&amp; uvicorn server.app:app</code></li>
<li class="">Check logs for reload message: <code>tail -f /tmp/agro-server.log</code></li>
<li class="">Verify mtime changed: <code>ls -l models/cross-encoder-agro/</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="eval-metrics-not-improving">&quot;Eval metrics not improving&quot;<a href="#eval-metrics-not-improving" class="hash-link" aria-label="Direct link to &quot;Eval metrics not improving&quot;" title="Direct link to &quot;Eval metrics not improving&quot;" translate="no">​</a></h3>
<ul>
<li class=""><strong>Expand golden.json</strong> with more diverse questions</li>
<li class=""><strong>Check expect_paths accuracy</strong>: Are they too broad or too narrow?</li>
<li class=""><strong>Verify training triplets are high quality</strong>: <code>head data/training/triplets.jsonl</code></li>
<li class=""><strong>Increase training epochs</strong> or adjust learning rate in <code>train_reranker.py</code></li>
<li class=""><strong>Collect more real usage data</strong>: Bootstrap with golden, then switch to user logs</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-topics">Advanced Topics<a href="#advanced-topics" class="hash-link" aria-label="Direct link to Advanced Topics" title="Direct link to Advanced Topics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="custom-reranker-backends">Custom Reranker Backends<a href="#custom-reranker-backends" class="hash-link" aria-label="Direct link to Custom Reranker Backends" title="Direct link to Custom Reranker Backends" translate="no">​</a></h3>
<p>AGRO supports multiple reranker backends:</p>
<ol>
<li class="">
<p><strong>sentence-transformers</strong> (default)</p>
<ul>
<li class="">Local cross-encoder model</li>
<li class="">Fast, no API calls</li>
<li class="">Models: BAAI/bge-reranker-v2-m3, ms-marco-MiniLM, etc.</li>
<li class="">Best for: Production, privacy, zero API cost</li>
</ul>
</li>
<li class="">
<p><strong>openai</strong> (experimental)</p>
<ul>
<li class="">Uses OpenAI embeddings + similarity scoring</li>
<li class="">Requires OPENAI_API_KEY</li>
<li class="">Slower, costs per query</li>
<li class="">Best for: Quick testing without training</li>
</ul>
</li>
</ol>
<p>Set via <code>AGRO_RERANKER_BACKEND=openai</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="triplet-mining-strategies">Triplet Mining Strategies<a href="#triplet-mining-strategies" class="hash-link" aria-label="Direct link to Triplet Mining Strategies" title="Direct link to Triplet Mining Strategies" translate="no">​</a></h3>
<p><strong>Golden Questions</strong> (<code>scripts/mine_from_golden.py</code>):</p>
<ul>
<li class=""><strong>Pros</strong>: Clean, controlled test set</li>
<li class=""><strong>Cons</strong>: Limited diversity, needs manual curation</li>
<li class=""><strong>Best for</strong>: Bootstrapping, regression testing</li>
<li class=""><strong>Yields</strong>: ~1 triplet per golden question</li>
</ul>
<p><strong>User Logs</strong> (<code>scripts/mine_triplets.py</code>):</p>
<ul>
<li class=""><strong>Pros</strong>: Real usage patterns, diverse queries</li>
<li class=""><strong>Cons</strong>: Noisy, needs rating thresholds tuning</li>
<li class=""><strong>Best for</strong>: Continuous improvement, production models</li>
<li class=""><strong>Yields</strong>: Variable, depends on user activity</li>
</ul>
<p><strong>Hybrid Approach</strong> (recommended):</p>
<ol>
<li class="">Bootstrap with golden questions (get to 30+ triplets)</li>
<li class="">Continuously mine from logs as users provide feedback</li>
<li class="">Periodically expand golden.json with new common queries</li>
<li class="">Retrain monthly or when you have 50+ new triplets</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-with-other-components">Integration with Other Components<a href="#integration-with-other-components" class="hash-link" aria-label="Direct link to Integration with Other Components" title="Direct link to Integration with Other Components" translate="no">​</a></h3>
<p>The reranker integrates with:</p>
<ul>
<li class=""><strong>Hybrid Search</strong> (<code>retrieval/hybrid_search.py:170</code>) - Rescores BM25+Vector results</li>
<li class=""><strong>Telemetry</strong> (<code>server/telemetry.py</code>) - Logs feedback events to queries.jsonl</li>
<li class=""><strong>Golden Tests</strong> (<code>golden.json</code>) - Provides eval questions and training data</li>
<li class=""><strong>GUI</strong> (<code>gui/js/reranker.js</code>) - Collects user feedback via clicks and buttons</li>
<li class=""><strong>MCP Server</strong> - Uses reranker for all <code>rag_answer</code> and <code>rag_search</code> calls</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-metrics">Performance Metrics<a href="#performance-metrics" class="hash-link" aria-label="Direct link to Performance Metrics" title="Direct link to Performance Metrics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-good-scores-look-like">What Good Scores Look Like<a href="#what-good-scores-look-like" class="hash-link" aria-label="Direct link to What Good Scores Look Like" title="Direct link to What Good Scores Look Like" translate="no">​</a></h3>
<p><strong>MRR (Mean Reciprocal Rank):</strong></p>
<ul>
<li class=""><strong>0.9-1.0</strong>: Excellent - correct answer almost always #1</li>
<li class=""><strong>0.7-0.9</strong>: Good - correct answer usually in top 2-3</li>
<li class=""><strong>0.5-0.7</strong>: Acceptable - correct answer usually in top 4-5</li>
<li class=""><strong>&lt; 0.5</strong>: Needs improvement</li>
</ul>
<p><strong>Hit@5:</strong></p>
<ul>
<li class=""><strong>&gt; 95%</strong>: Excellent - almost all queries find correct answer in top 5</li>
<li class=""><strong>85-95%</strong>: Good - most queries successful</li>
<li class=""><strong>75-85%</strong>: Acceptable - decent retrieval quality</li>
<li class=""><strong>&lt; 75%</strong>: Needs improvement</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tracking-progress">Tracking Progress<a href="#tracking-progress" class="hash-link" aria-label="Direct link to Tracking Progress" title="Direct link to Tracking Progress" translate="no">​</a></h3>
<p>Keep a log of eval results over time:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># After each training cycle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;</span><span class="token string variable" style="color:rgb(156, 220, 254)">$(</span><span class="token string variable function" style="color:rgb(220, 220, 170)">date</span><span class="token string variable" style="color:rgb(156, 220, 254)">)</span><span class="token string" style="color:rgb(206, 145, 120)">: MRR=</span><span class="token string variable" style="color:rgb(156, 220, 254)">$(</span><span class="token string variable function" style="color:rgb(220, 220, 170)">curl</span><span class="token string variable" style="color:rgb(156, 220, 254)"> </span><span class="token string variable parameter variable" style="color:rgb(156, 220, 254)">-s</span><span class="token string variable" style="color:rgb(156, 220, 254)"> localhost:8012/api/reranker/eval/latest </span><span class="token string variable operator" style="color:rgb(212, 212, 212)">|</span><span class="token string variable" style="color:rgb(156, 220, 254)"> jq .metrics.mrr</span><span class="token string variable" style="color:rgb(156, 220, 254)">)</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token plain"> reranker_progress.log</span><br></span></code></pre></div></div>
<p>Graph your progress:</p>
<ul>
<li class="">MRR going up = reranker learning your codebase</li>
<li class="">Hit@K going up = fewer failed searches</li>
<li class="">Training loss going down = model converging</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="files-reference">Files Reference<a href="#files-reference" class="hash-link" aria-label="Direct link to Files Reference" title="Direct link to Files Reference" translate="no">​</a></h2>
<table><thead><tr><th>File</th><th>Purpose</th></tr></thead><tbody><tr><td><code>gui/js/reranker.js</code></td><td>Feedback collection UI (click tracking, thumbs buttons)</td></tr><tr><td><code>server/telemetry.py</code></td><td>Logs feedback events to queries.jsonl</td></tr><tr><td><code>server/reranker.py</code></td><td>Model loading, hot-reload, inference</td></tr><tr><td><code>server/reranker_info.py</code></td><td><code>/api/reranker/info</code> endpoint</td></tr><tr><td><code>retrieval/hybrid_search.py</code></td><td>Calls <code>ce_rerank()</code> at line 170</td></tr><tr><td><code>scripts/mine_triplets.py</code></td><td>Mines triplets from queries.jsonl</td></tr><tr><td><code>scripts/mine_from_golden.py</code></td><td>Mines triplets from golden.json</td></tr><tr><td><code>scripts/train_reranker.py</code></td><td>Trains cross-encoder on triplets.jsonl</td></tr><tr><td><code>scripts/eval_reranker.py</code></td><td>Evaluates model on golden.json</td></tr><tr><td><code>scripts/promote_reranker.py</code></td><td>Promotes model to production path</td></tr><tr><td><code>data/logs/queries.jsonl</code></td><td>Feedback event log</td></tr><tr><td><code>data/training/triplets.jsonl</code></td><td>Training data</td></tr><tr><td><code>data/evals/latest.json</code></td><td>Most recent eval metrics</td></tr><tr><td><code>models/cross-encoder-agro/</code></td><td>Production model (hot-reloaded)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/agro-rag-engine/features/rag">RAG System</a> - How hybrid search works</li>
<li class=""><a class="" href="/agro-rag-engine/api/reference">API Reference</a> - All HTTP endpoints</li>
<li class=""><a class="" href="/agro-rag-engine/configuration/performance">Configuration</a> - Tuning retrieval parameters</li>
<li class=""><a class="" href="/agro-rag-engine/operations/monitoring">Monitoring</a> - Tracking reranker performance</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/DMontgomery40/agro-rag-engine/tree/main/website/docs/features/learning-reranker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/agro-rag-engine/features/rag"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RAG System</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/agro-rag-engine/features/mcp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MCP Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-it-does" class="table-of-contents__link toc-highlight">What It Does</a></li><li><a href="#how-reranking-works" class="table-of-contents__link toc-highlight">How Reranking Works</a></li><li><a href="#training-data-format" class="table-of-contents__link toc-highlight">Training Data Format</a></li><li><a href="#gui-features" class="table-of-contents__link toc-highlight">GUI Features</a><ul><li><a href="#feedback-collection" class="table-of-contents__link toc-highlight">Feedback Collection</a></li><li><a href="#how-to-use-feedback" class="table-of-contents__link toc-highlight">How to Use Feedback</a></li></ul></li><li><a href="#complete-training-workflow" class="table-of-contents__link toc-highlight">Complete Training Workflow</a><ul><li><a href="#step-1-mine-triplets" class="table-of-contents__link toc-highlight">Step 1: Mine Triplets</a></li><li><a href="#step-2-train-model" class="table-of-contents__link toc-highlight">Step 2: Train Model</a></li><li><a href="#step-3-evaluate" class="table-of-contents__link toc-highlight">Step 3: Evaluate</a></li><li><a href="#step-4-promote-to-production" class="table-of-contents__link toc-highlight">Step 4: Promote to Production</a></li></ul></li><li><a href="#api-endpoints" class="table-of-contents__link toc-highlight">API Endpoints</a><ul><li><a href="#get-model-info" class="table-of-contents__link toc-highlight">Get Model Info</a></li><li><a href="#mine-triplets" class="table-of-contents__link toc-highlight">Mine Triplets</a></li><li><a href="#train-model" class="table-of-contents__link toc-highlight">Train Model</a></li><li><a href="#evaluate-model" class="table-of-contents__link toc-highlight">Evaluate Model</a></li><li><a href="#view-logs" class="table-of-contents__link toc-highlight">View Logs</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment Variables</a></li><li><a href="#model-hot-reloading" class="table-of-contents__link toc-highlight">Model Hot-Reloading</a></li></ul></li><li><a href="#complete-training-example" class="table-of-contents__link toc-highlight">Complete Training Example</a></li><li><a href="#continuous-improvement-loop" class="table-of-contents__link toc-highlight">Continuous Improvement Loop</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#only-1-triplets--30-abort" class="table-of-contents__link toc-highlight">&quot;Only 1 triplets (&lt; 30); abort&quot;</a></li><li><a href="#no-feedback-events-logged" class="table-of-contents__link toc-highlight">&quot;No feedback events logged&quot;</a></li><li><a href="#model-not-reloading" class="table-of-contents__link toc-highlight">&quot;Model not reloading&quot;</a></li><li><a href="#eval-metrics-not-improving" class="table-of-contents__link toc-highlight">&quot;Eval metrics not improving&quot;</a></li></ul></li><li><a href="#advanced-topics" class="table-of-contents__link toc-highlight">Advanced Topics</a><ul><li><a href="#custom-reranker-backends" class="table-of-contents__link toc-highlight">Custom Reranker Backends</a></li><li><a href="#triplet-mining-strategies" class="table-of-contents__link toc-highlight">Triplet Mining Strategies</a></li><li><a href="#integration-with-other-components" class="table-of-contents__link toc-highlight">Integration with Other Components</a></li></ul></li><li><a href="#performance-metrics" class="table-of-contents__link toc-highlight">Performance Metrics</a><ul><li><a href="#what-good-scores-look-like" class="table-of-contents__link toc-highlight">What Good Scores Look Like</a></li><li><a href="#tracking-progress" class="table-of-contents__link toc-highlight">Tracking Progress</a></li></ul></li><li><a href="#files-reference" class="table-of-contents__link toc-highlight">Files Reference</a></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/getting-started/quickstart">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/api/reference">API Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/configuration/models">Configuration</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Features</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/features/rag">RAG System</a></li><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/features/learning-reranker">Learning Reranker</a></li><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/features/mcp">MCP Integration</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/DMontgomery40/agro-rag-engine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/agro-rag-engine/development/contributing">Contributing</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AGRO Project. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>