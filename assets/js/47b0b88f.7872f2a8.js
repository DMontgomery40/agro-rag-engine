"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[762],{4016:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"api/reference","title":"API Reference","description":"Complete reference for AGRO\'s HTTP API. All endpoints return JSON unless otherwise specified.","source":"@site/docs/api/reference.md","sourceDirName":"api","slug":"/api/reference","permalink":"/agro-rag-engine/api/reference","draft":false,"unlisted":false,"editUrl":"https://github.com/DMontgomery40/agro-rag-engine/tree/main/website/docs/api/reference.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Chat Interface","permalink":"/agro-rag-engine/features/chat-interface"},"next":{"title":"HTTP Endpoints","permalink":"/agro-rag-engine/api/endpoints"}}');var i=s(4848),a=s(8453);const l={sidebar_position:1},d="API Reference",o={},t=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"RAG Operations",id:"rag-operations",level:2},{value:"GET <code>/answer</code>",id:"get-answer",level:3},{value:"GET <code>/search</code>",id:"get-search",level:3},{value:"POST <code>/api/chat</code>",id:"post-apichat",level:3},{value:"Configuration &amp; Management",id:"configuration--management",level:2},{value:"GET <code>/api/config</code>",id:"get-apiconfig",level:3},{value:"POST <code>/api/config</code>",id:"post-apiconfig",level:3},{value:"GET <code>/api/profiles</code>",id:"get-apiprofiles",level:3},{value:"POST <code>/api/profiles/save</code>",id:"post-apiprofilessave",level:3},{value:"POST <code>/api/profiles/apply</code>",id:"post-apiprofilesapply",level:3},{value:"Indexing &amp; Data",id:"indexing--data",level:2},{value:"POST <code>/api/index/start</code>",id:"post-apiindexstart",level:3},{value:"GET <code>/api/index/status</code>",id:"get-apiindexstatus",level:3},{value:"POST <code>/api/cards/build/start</code>",id:"post-apicardsbuildstart",level:3},{value:"GET <code>/api/cards/build/stream/{job_id}</code>",id:"get-apicardsbuildstreamjob_id",level:3},{value:"GET <code>/api/cards</code>",id:"get-apicards",level:3},{value:"Cost &amp; Performance",id:"cost--performance",level:2},{value:"POST <code>/api/cost/estimate</code>",id:"post-apicostestimate",level:3},{value:"POST <code>/api/cost/estimate_pipeline</code>",id:"post-apicostestimate_pipeline",level:3},{value:"GET <code>/api/prices</code>",id:"get-apiprices",level:3},{value:"POST <code>/api/prices/upsert</code>",id:"post-apipricesupsert",level:3},{value:"Evaluation",id:"evaluation",level:2},{value:"GET <code>/api/golden</code>",id:"get-apigolden",level:3},{value:"POST <code>/api/golden</code>",id:"post-apigolden",level:3},{value:"PUT <code>/api/golden/{index}</code>",id:"put-apigoldenindex",level:3},{value:"DELETE <code>/api/golden/{index}</code>",id:"delete-apigoldenindex",level:3},{value:"POST <code>/api/golden/test</code>",id:"post-apigoldentest",level:3},{value:"POST <code>/api/eval/run</code>",id:"post-apievalrun",level:3},{value:"GET <code>/api/eval/results</code>",id:"get-apievalresults",level:3},{value:"POST <code>/api/eval/baseline/save</code>",id:"post-apievalbaselinesave",level:3},{value:"GET <code>/api/eval/baseline/compare</code>",id:"get-apievalbaselinecompare",level:3},{value:"Observability",id:"observability",level:2},{value:"GET <code>/health</code>",id:"get-health",level:3},{value:"GET <code>/health/langsmith</code>",id:"get-healthlangsmith",level:3},{value:"GET <code>/api/traces</code>",id:"get-apitraces",level:3},{value:"GET <code>/api/traces/latest</code>",id:"get-apitraceslatest",level:3},{value:"GET <code>/api/langsmith/latest</code>",id:"get-apilangsmithlatest",level:3},{value:"GET <code>/api/langsmith/runs</code>",id:"get-apilangsmithruns",level:3},{value:"MCP Wrapper Endpoints",id:"mcp-wrapper-endpoints",level:2},{value:"GET <code>/api/mcp/rag_search</code>",id:"get-apimcprag_search",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,i.jsx)(n.p,{children:"Complete reference for AGRO's HTTP API. All endpoints return JSON unless otherwise specified."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Base URL"}),": ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:8012"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interactive Documentation"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Swagger UI: ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8012/docs",children:"http://127.0.0.1:8012/docs"})]}),"\n",(0,i.jsxs)(n.li,{children:["ReDoc: ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8012/redoc",children:"http://127.0.0.1:8012/redoc"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The API is designed for local-first use and binds to ",(0,i.jsx)(n.code,{children:"127.0.0.1"})," by default."]}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#rag-operations",children:"RAG Operations"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#configuration--management",children:"Configuration & Management"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#indexing--data",children:"Indexing & Data"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cost--performance",children:"Cost & Performance"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#evaluation",children:"Evaluation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#observability",children:"Observability"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#mcp-wrapper-endpoints",children:"MCP Wrapper Endpoints"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#error-responses",children:"Error Responses"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rag-operations",children:"RAG Operations"}),"\n",(0,i.jsxs)(n.h3,{id:"get-answer",children:["GET ",(0,i.jsx)(n.code,{children:"/answer"})]}),"\n",(0,i.jsx)(n.p,{children:"Full RAG pipeline: retrieval \u2192 reranking \u2192 generation with citations."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"q"})," (string, required) - The question to answer"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Repository name (defaults to ",(0,i.jsx)(n.code,{children:"REPO"})," env var)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"top_k"})," (integer, optional) - Number of results to retrieve (default: 10)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "answer": "[repo: agro]\\n\\nOAuth tokens are validated in the `auth/middleware.py` file...",\n  "citations": [\n    "auth/middleware.py:45-67",\n    "server/auth.py:120-145"\n  ],\n  "repo": "agro",\n  "confidence": 0.78,\n  "retrieval_count": 5\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://127.0.0.1:8012/answer?q=Where%20is%20OAuth%20validated&repo=agro"\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-search",children:["GET ",(0,i.jsx)(n.code,{children:"/search"})]}),"\n",(0,i.jsx)(n.p,{children:"Retrieval only (no generation). Returns ranked code chunks with rerank scores."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"q"})," (string, required) - Search query"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Repository name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"top_k"})," (integer, optional) - Number of results (default: 10)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "file_path": "auth/middleware.py",\n      "start_line": 45,\n      "end_line": 67,\n      "language": "python",\n      "rerank_score": 0.85,\n      "layer": "server",\n      "repo": "agro",\n      "code": "def validate_oauth_token(token: str):\\n    ..."\n    }\n  ],\n  "repo": "agro",\n  "count": 5,\n  "query": "Where is OAuth validated"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://127.0.0.1:8012/search?q=authentication&repo=agro&top_k=5"\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apichat",children:["POST ",(0,i.jsx)(n.code,{children:"/api/chat"})]}),"\n",(0,i.jsx)(n.p,{children:"Multi-turn conversational chat with memory and context."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "How does the indexer work?",\n  "repo": "agro",\n  "thread_id": "user-session-123",\n  "stream": false\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "answer": "The indexer in AGRO works by...",\n  "citations": ["indexer/index_repo.py:45-120"],\n  "thread_id": "user-session-123",\n  "turn_count": 3\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Streaming Response (SSE)"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:'"stream": true'})," to get Server-Sent Events:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8012/api/chat \\\n  -H "Content-Type: application/json" \\\n  -d \'{"message":"Explain indexing","repo":"agro","stream":true}\' \\\n  --no-buffer\n'})}),"\n",(0,i.jsx)(n.h2,{id:"configuration--management",children:"Configuration & Management"}),"\n",(0,i.jsxs)(n.h3,{id:"get-apiconfig",children:["GET ",(0,i.jsx)(n.code,{children:"/api/config"})]}),"\n",(0,i.jsx)(n.p,{children:"Get current environment configuration and repository settings."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "env": {\n    "GEN_MODEL": "gpt-4o-mini",\n    "EMBEDDING_TYPE": "openai",\n    "RERANK_BACKEND": "cohere",\n    "REPO": "agro",\n    "MQ_REWRITES": 4\n  },\n  "repos": {\n    "default_repo": "agro",\n    "repos": [\n      {\n        "name": "agro",\n        "path": ["/Users/user/agro"],\n        "enabled": true,\n        "keywords": ["rag", "retrieval", "hybrid"]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl http://127.0.0.1:8012/api/config\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apiconfig",children:["POST ",(0,i.jsx)(n.code,{children:"/api/config"})]}),"\n",(0,i.jsxs)(n.p,{children:["Update configuration (writes to ",(0,i.jsx)(n.code,{children:".env"})," and ",(0,i.jsx)(n.code,{children:"repos.json"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "env": {\n    "GEN_MODEL": "gpt-4o",\n    "RERANK_BACKEND": "local",\n    "MQ_REWRITES": 6\n  },\n  "repos": {\n    "default_repo": "agro"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "updated": ["GEN_MODEL", "RERANK_BACKEND", "MQ_REWRITES"],\n  "requires_restart": false,\n  "requires_reindex": false\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apiprofiles",children:["GET ",(0,i.jsx)(n.code,{children:"/api/profiles"})]}),"\n",(0,i.jsx)(n.p,{children:"List all saved configuration profiles."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "profiles": [\n    {\n      "name": "fast-local",\n      "description": "BM25-only, local models",\n      "settings": {\n        "GEN_MODEL": "qwen3-coder:14b",\n        "EMBEDDING_TYPE": "local",\n        "RERANK_BACKEND": "local"\n      }\n    },\n    {\n      "name": "high-quality",\n      "description": "Full hybrid, OpenAI models",\n      "settings": {\n        "GEN_MODEL": "gpt-4o",\n        "EMBEDDING_TYPE": "openai",\n        "RERANK_BACKEND": "cohere"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apiprofilessave",children:["POST ",(0,i.jsx)(n.code,{children:"/api/profiles/save"})]}),"\n",(0,i.jsx)(n.p,{children:"Save current config as a named profile."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-profile",\n  "description": "Custom settings for X",\n  "settings": {\n    "GEN_MODEL": "gpt-4o-mini",\n    "RERANK_BACKEND": "cohere"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apiprofilesapply",children:["POST ",(0,i.jsx)(n.code,{children:"/api/profiles/apply"})]}),"\n",(0,i.jsx)(n.p,{children:"Apply a saved profile (updates env vars)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "high-quality"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "applied": "high-quality",\n  "updated_keys": ["GEN_MODEL", "EMBEDDING_TYPE", "RERANK_BACKEND"]\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"indexing--data",children:"Indexing & Data"}),"\n",(0,i.jsxs)(n.h3,{id:"post-apiindexstart",children:["POST ",(0,i.jsx)(n.code,{children:"/api/index/start"})]}),"\n",(0,i.jsx)(n.p,{children:"Start indexing a repository (async operation)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Repository name"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "started",\n  "repo": "agro",\n  "job_id": "idx-20251013-123456",\n  "message": "Indexing started in background"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://127.0.0.1:8012/api/index/start?repo=agro"\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apiindexstatus",children:["GET ",(0,i.jsx)(n.code,{children:"/api/index/status"})]}),"\n",(0,i.jsx)(n.p,{children:"Check indexing job status."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "running",\n  "repo": "agro",\n  "progress": {\n    "files_processed": 234,\n    "files_total": 567,\n    "chunks_created": 1234,\n    "elapsed_seconds": 45\n  },\n  "message": "Processing files..."\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apicardsbuildstart",children:["POST ",(0,i.jsx)(n.code,{children:"/api/cards/build/start"})]}),"\n",(0,i.jsx)(n.p,{children:"Build semantic cards (high-level summaries) for a repo."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Repository name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enrich"})," (integer, optional) - Enable enrichment with LLM (1=yes, 0=no, default: 1)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "cards-abc123",\n  "status": "started",\n  "repo": "agro",\n  "stream_url": "/api/cards/build/stream/cards-abc123"\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apicardsbuildstreamjob_id",children:["GET ",(0,i.jsx)(n.code,{children:"/api/cards/build/stream/{job_id}"})]}),"\n",(0,i.jsx)(n.p,{children:"Stream card building progress (SSE)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response (Server-Sent Events)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'event: progress\ndata: {"files_processed": 10, "total": 100, "message": "Processing auth/"}\n\nevent: card\ndata: {"file": "auth/oauth.py", "card": "OAuth token validation..."}\n\nevent: complete\ndata: {"total_cards": 45, "elapsed": 123}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -N http://127.0.0.1:8012/api/cards/build/stream/cards-abc123\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apicards",children:["GET ",(0,i.jsx)(n.code,{children:"/api/cards"})]}),"\n",(0,i.jsx)(n.p,{children:"List all semantic cards for a repo."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Repository name"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "repo": "agro",\n  "cards": [\n    {\n      "file_path": "auth/oauth.py",\n      "summary": "OAuth 2.0 token validation and refresh logic",\n      "keywords": ["oauth", "token", "validation", "auth"]\n    }\n  ],\n  "count": 45\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost--performance",children:"Cost & Performance"}),"\n",(0,i.jsxs)(n.h3,{id:"post-apicostestimate",children:["POST ",(0,i.jsx)(n.code,{children:"/api/cost/estimate"})]}),"\n",(0,i.jsx)(n.p,{children:"Estimate costs for a given configuration."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "gen_provider": "openai",\n  "gen_model": "gpt-4o-mini",\n  "embed_provider": "openai",\n  "embed_model": "text-embedding-3-large",\n  "rerank_provider": "cohere",\n  "rerank_model": "rerank-3.5",\n  "tokens_in": 1000,\n  "tokens_out": 500,\n  "embeds": 100,\n  "reranks": 50,\n  "requests_per_day": 100\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "daily_cost": 2.45,\n  "monthly_cost": 73.50,\n  "breakdown": {\n    "generation": 1.20,\n    "embeddings": 0.80,\n    "reranking": 0.45\n  },\n  "per_request": 0.0245\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apicostestimate_pipeline",children:["POST ",(0,i.jsx)(n.code,{children:"/api/cost/estimate_pipeline"})]}),"\n",(0,i.jsx)(n.p,{children:"Full pipeline cost estimate based on actual usage patterns."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "repo": "agro",\n  "queries_per_day": 50,\n  "avg_chunks_per_query": 10,\n  "avg_output_tokens": 300\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "daily": 5.67,\n  "monthly": 170.10,\n  "yearly": 2068.55,\n  "breakdown": {\n    "retrieval": 1.20,\n    "reranking": 0.80,\n    "generation": 3.67\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apiprices",children:["GET ",(0,i.jsx)(n.code,{children:"/api/prices"})]}),"\n",(0,i.jsx)(n.p,{children:"Get model pricing database."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "models": [\n    {\n      "provider": "openai",\n      "model": "gpt-4o-mini",\n      "unit": "1k_tokens",\n      "input_cost": 0.000150,\n      "output_cost": 0.000600\n    },\n    {\n      "provider": "cohere",\n      "model": "rerank-3.5",\n      "unit": "1k_searches",\n      "rerank_per_1k": 2.00\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apipricesupsert",children:["POST ",(0,i.jsx)(n.code,{children:"/api/prices/upsert"})]}),"\n",(0,i.jsx)(n.p,{children:"Add or update model pricing."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "provider": "openai",\n  "model": "gpt-4o",\n  "unit": "1k_tokens",\n  "input_cost": 0.0025,\n  "output_cost": 0.010\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"evaluation",children:"Evaluation"}),"\n",(0,i.jsxs)(n.h3,{id:"get-apigolden",children:["GET ",(0,i.jsx)(n.code,{children:"/api/golden"})]}),"\n",(0,i.jsx)(n.p,{children:"List all golden test questions."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tests": [\n    {\n      "q": "Where is OAuth validated?",\n      "repo": "agro",\n      "expect_paths": ["auth", "oauth", "token"]\n    }\n  ],\n  "count": 10\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apigolden",children:["POST ",(0,i.jsx)(n.code,{children:"/api/golden"})]}),"\n",(0,i.jsx)(n.p,{children:"Add a new golden test."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "q": "How does the reranker work?",\n  "repo": "agro",\n  "expect_paths": ["rerank", "retrieval"]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"put-apigoldenindex",children:["PUT ",(0,i.jsx)(n.code,{children:"/api/golden/{index}"})]}),"\n",(0,i.jsx)(n.p,{children:"Update an existing golden test."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "q": "Where is OAuth token validated?",\n  "repo": "agro",\n  "expect_paths": ["auth", "oauth", "token", "validation"]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"delete-apigoldenindex",children:["DELETE ",(0,i.jsx)(n.code,{children:"/api/golden/{index}"})]}),"\n",(0,i.jsx)(n.p,{children:"Delete a golden test by index."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "deleted_index": 2,\n  "remaining_count": 9\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apigoldentest",children:["POST ",(0,i.jsx)(n.code,{children:"/api/golden/test"})]}),"\n",(0,i.jsx)(n.p,{children:"Test a single question without adding to golden set."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "q": "How does indexing work?",\n  "repo": "agro",\n  "expect_paths": ["index", "chunk"]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "hit": true,\n  "results": [\n    {\n      "file_path": "indexer/index_repo.py",\n      "rerank_score": 0.85\n    }\n  ],\n  "matched_paths": ["index"]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apievalrun",children:["POST ",(0,i.jsx)(n.code,{children:"/api/eval/run"})]}),"\n",(0,i.jsx)(n.p,{children:"Run full evaluation suite."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body (optional)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "save_baseline": false,\n  "compare_to_baseline": false\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "total_questions": 10,\n  "top1_accuracy": 0.70,\n  "top5_accuracy": 0.90,\n  "duration_seconds": 15.4,\n  "results": [\n    {\n      "question": "Where is OAuth validated?",\n      "hit_top1": true,\n      "hit_top5": true,\n      "top_result": "auth/oauth.py"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apievalresults",children:["GET ",(0,i.jsx)(n.code,{children:"/api/eval/results"})]}),"\n",(0,i.jsx)(n.p,{children:"Get latest evaluation results."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "timestamp": "2025-10-13T12:34:56Z",\n  "accuracy": {\n    "top1": 0.70,\n    "top5": 0.90\n  },\n  "duration": 15.4,\n  "total": 10\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"post-apievalbaselinesave",children:["POST ",(0,i.jsx)(n.code,{children:"/api/eval/baseline/save"})]}),"\n",(0,i.jsx)(n.p,{children:"Save current eval results as baseline for regression tracking."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "saved_at": "2025-10-13T12:34:56Z",\n  "baseline_file": "eval_baseline.json"\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apievalbaselinecompare",children:["GET ",(0,i.jsx)(n.code,{children:"/api/eval/baseline/compare"})]}),"\n",(0,i.jsx)(n.p,{children:"Compare current eval against saved baseline."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "baseline": {\n    "top1": 0.70,\n    "top5": 0.90\n  },\n  "current": {\n    "top1": 0.65,\n    "top5": 0.88\n  },\n  "diff": {\n    "top1": -0.05,\n    "top5": -0.02\n  },\n  "regressions": [\n    {\n      "question": "How does reranking work?",\n      "was_hit": true,\n      "now_hit": false\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"observability",children:"Observability"}),"\n",(0,i.jsxs)(n.h3,{id:"get-health",children:["GET ",(0,i.jsx)(n.code,{children:"/health"})]}),"\n",(0,i.jsx)(n.p,{children:"Service health check."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "healthy",\n  "graph_loaded": true,\n  "ts": "2025-10-13T12:34:56Z"\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-healthlangsmith",children:["GET ",(0,i.jsx)(n.code,{children:"/health/langsmith"})]}),"\n",(0,i.jsx)(n.p,{children:"LangSmith integration status."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "enabled": true,\n  "installed": true,\n  "project": "agro-rag",\n  "endpoint": "https://api.smith.langchain.com",\n  "key_present": true,\n  "can_connect": true,\n  "identity": {\n    "user_id": "abc123",\n    "org_id": "org-xyz"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apitraces",children:["GET ",(0,i.jsx)(n.code,{children:"/api/traces"})]}),"\n",(0,i.jsx)(n.p,{children:"List recent retrieval traces."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, optional) - Filter by repository"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer, optional) - Number of traces (default: 20)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "traces": [\n    {\n      "query": "Where is OAuth validated?",\n      "repo": "agro",\n      "timestamp": "2025-10-13T12:34:56Z",\n      "retrieval_count": 5,\n      "top_score": 0.85,\n      "duration_ms": 234\n    }\n  ],\n  "count": 10\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apitraceslatest",children:["GET ",(0,i.jsx)(n.code,{children:"/api/traces/latest"})]}),"\n",(0,i.jsx)(n.p,{children:"Get the most recent trace."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "query": "How does indexing work?",\n  "repo": "agro",\n  "results": [\n    {\n      "file_path": "indexer/index_repo.py",\n      "rerank_score": 0.85,\n      "layer": "indexer"\n    }\n  ],\n  "duration_ms": 234\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apilangsmithlatest",children:["GET ",(0,i.jsx)(n.code,{children:"/api/langsmith/latest"})]}),"\n",(0,i.jsx)(n.p,{children:"Get latest LangSmith runs."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer, optional) - Number of runs (default: 10)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "runs": [\n    {\n      "id": "run-abc123",\n      "name": "rag_search",\n      "status": "success",\n      "start_time": "2025-10-13T12:34:56Z",\n      "end_time": "2025-10-13T12:34:58Z",\n      "duration_ms": 2000\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"get-apilangsmithruns",children:["GET ",(0,i.jsx)(n.code,{children:"/api/langsmith/runs"})]}),"\n",(0,i.jsx)(n.p,{children:"Query LangSmith runs with filters."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"project"})," (string, optional) - Project name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"status"})," (string, optional) - Filter by status (success, error)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer, optional) - Number of results (default: 20)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"mcp-wrapper-endpoints",children:"MCP Wrapper Endpoints"}),"\n",(0,i.jsx)(n.p,{children:"These endpoints provide HTTP access to MCP tools for remote agents."}),"\n",(0,i.jsxs)(n.h3,{id:"get-apimcprag_search",children:["GET ",(0,i.jsx)(n.code,{children:"/api/mcp/rag_search"})]}),"\n",(0,i.jsxs)(n.p,{children:["MCP ",(0,i.jsx)(n.code,{children:"rag_search"})," tool via HTTP."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repo"})," (string, required) - Repository name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"question"})," (string, required) - Search query"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"top_k"})," (integer, optional) - Number of results (default: 10)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "file_path": "auth/oauth.py",\n      "start_line": 45,\n      "end_line": 67,\n      "rerank_score": 0.85\n    }\n  ],\n  "count": 5,\n  "repo": "agro"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://127.0.0.1:8012/api/mcp/rag_search?repo=agro&question=OAuth%20validation&top_k=5"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(n.p,{children:"All errors follow this format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "detail": "Repository \'invalid-repo\' not found",\n  "error_code": "REPO_NOT_FOUND",\n  "status_code": 404\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common Error Codes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"400"})," - Bad Request (invalid parameters)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - Not Found (repo, profile, or resource missing)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"})," - Internal Server Error (check logs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"503"})," - Service Unavailable (dependencies down)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsxs)(n.p,{children:["By default, all endpoints are ",(0,i.jsx)(n.strong,{children:"unauthenticated"})," and bind to ",(0,i.jsx)(n.code,{children:"127.0.0.1"})," (localhost only)."]}),"\n",(0,i.jsx)(n.p,{children:"For remote access or production deployment, consider:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reverse proxy with authentication (Caddy, Nginx)"}),"\n",(0,i.jsx)(n.li,{children:"OAuth 2.0 integration (see GUI settings)"}),"\n",(0,i.jsx)(n.li,{children:"VPN or SSH tunnel for secure access"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsx)(n.p,{children:"No built-in rate limiting. For production use:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add reverse proxy with rate limiting"}),"\n",(0,i.jsx)(n.li,{children:"Use API gateway (Kong, Tyk)"}),"\n",(0,i.jsx)(n.li,{children:"Monitor with observability tools"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Interactive API Docs"}),": ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8012/docs",children:"http://127.0.0.1:8012/docs"})," (Swagger UI)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Alternative Docs"}),": ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8012/redoc",children:"http://127.0.0.1:8012/redoc"})," (ReDoc)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MCP Integration"}),": ",(0,i.jsx)(n.a,{href:"/agro-rag-engine/features/mcp",children:"MCP Integration"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance & Cost"}),": ",(0,i.jsx)(n.a,{href:"/agro-rag-engine/configuration/performance",children:"Performance & Cost"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Version"}),": 2.1.0\n",(0,i.jsx)(n.strong,{children:"Last Updated"}),": October 2025"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(6540);const i={},a=r.createContext(i);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);