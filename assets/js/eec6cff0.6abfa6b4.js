"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[879],{3431:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/grafana-metrics-c0ec50dec254ec12638ec4c2eb104510.png"},6045:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"configuration/performance","title":"Performance & Cost Analysis","description":"AGRO dramatically reduces token consumption compared to using AI assistants without RAG. This document shows real-world performance data and cost savings.","source":"@site/docs/configuration/performance.md","sourceDirName":"configuration","slug":"/configuration/performance","permalink":"/agro-rag-engine/configuration/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/DMontgomery40/agro-rag-engine/tree/main/website/docs/configuration/performance.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"Model Configuration","permalink":"/agro-rag-engine/configuration/models"},"next":{"title":"Filtering & Exclusions","permalink":"/agro-rag-engine/configuration/filtering"}}');var r=s(4848),l=s(8453);const t={sidebar_position:2},o="Performance & Cost Analysis",d={},c=[{value:"Executive Summary",id:"executive-summary",level:2},{value:"Real-World Comparison",id:"real-world-comparison",level:2},{value:"Impact on Rate Limits",id:"impact-on-rate-limits",level:2},{value:"Example Rate Limits (Illustrative)",id:"example-rate-limits-illustrative",level:3},{value:"Speed Comparison",id:"speed-comparison",level:2},{value:"Quality Comparison",id:"quality-comparison",level:2},{value:"When RAG Works Better",id:"when-rag-works-better",level:3},{value:"Using RAG Results Effectively",id:"using-rag-results-effectively",level:3},{value:"Contributing Benchmarks",id:"contributing-benchmarks",level:2},{value:"Cost Analysis",id:"cost-analysis",level:2},{value:"Cloud API Costs",id:"cloud-api-costs",level:3},{value:"Self-Hosted Savings",id:"self-hosted-savings",level:3},{value:"Hidden Costs",id:"hidden-costs",level:3},{value:"Optimization Strategies",id:"optimization-strategies",level:2},{value:"1. Use BM25-Only for Development",id:"1-use-bm25-only-for-development",level:3},{value:"2. Cache Aggressively",id:"2-cache-aggressively",level:3},{value:"3. Right-Size Your Models",id:"3-right-size-your-models",level:3},{value:"4. Batch Operations",id:"4-batch-operations",level:3},{value:"5. Monitor with Prometheus",id:"5-monitor-with-prometheus",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Retrieval Performance",id:"retrieval-performance",level:3},{value:"Generation Performance",id:"generation-performance",level:3},{value:"Monitoring &amp; Alerts",id:"monitoring--alerts",level:2},{value:"Key Metrics to Track",id:"key-metrics-to-track",level:3},{value:"Setting Up Alerts",id:"setting-up-alerts",level:3},{value:"Benchmarking Tools",id:"benchmarking-tools",level:2},{value:"Run Your Own Tests",id:"run-your-own-tests",level:3},{value:"Eval Loop",id:"eval-loop",level:3},{value:"Real-World Case Study",id:"real-world-case-study",level:2},{value:"Orphaned Loop Incident",id:"orphaned-loop-incident",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"performance--cost-analysis",children:"Performance & Cost Analysis"})}),"\n",(0,r.jsx)(n.p,{children:"AGRO dramatically reduces token consumption compared to using AI assistants without RAG. This document shows real-world performance data and cost savings."}),"\n",(0,r.jsx)(n.h2,{id:"executive-summary",children:"Executive Summary"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Bottom line"}),": RAG saves 91% tokens. That means 11x more queries before hitting your rate limits."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Performance Metrics",src:s(3431).A+"",width:"1567",height:"1237"})}),"\n",(0,r.jsx)(n.h2,{id:"real-world-comparison",children:"Real-World Comparison"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test Details"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Date"}),": 2025-10-08"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query"}),': "Where is OAuth processed in this repo, and which plugins must validate with it?"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Model"}),": Claude Sonnet 4.5 on $200/mo Pro"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tester"}),": @dmontgomery40"]}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Approach"}),(0,r.jsx)(n.th,{children:"Tokens/Query"}),(0,r.jsx)(n.th,{children:"Queries Before Rate Limit"}),(0,r.jsx)(n.th,{children:"Latency"}),(0,r.jsx)(n.th,{children:"Quality"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Claude Code Alone"})}),(0,r.jsx)(n.td,{children:"12,700"}),(0,r.jsx)(n.td,{children:"100"}),(0,r.jsx)(n.td,{children:"5-10s"}),(0,r.jsx)(n.td,{children:"Excellent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Claude Code + RAG"})}),(0,r.jsx)(n.td,{children:"1,141"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"1,110"})}),(0,r.jsx)(n.td,{children:"2.9s"}),(0,r.jsx)(n.td,{children:"Excellent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"DIFFERENCE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"-11,559 (-91%)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"+1,010 (+1,010%)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"-5s"})}),(0,r.jsx)(n.td,{children:"Same"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"impact-on-rate-limits",children:"Impact on Rate Limits"}),"\n",(0,r.jsx)(n.p,{children:"Rate limits are the real bottleneck when using AI assistants, not cost. Even with a paid plan, you hit weekly token caps quickly."}),"\n",(0,r.jsx)(n.h3,{id:"example-rate-limits-illustrative",children:"Example Rate Limits (Illustrative)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: These are simplified examples for comparison purposes. Check your actual plan limits."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Without RAG"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sonnet: 1.27M tokens/week \xf7 12,700 tokens/query = ",(0,r.jsx)(n.strong,{children:"100 queries/week"})]}),"\n",(0,r.jsxs)(n.li,{children:["Opus: 300K tokens/week \xf7 12,700 tokens/query = ",(0,r.jsx)(n.strong,{children:"23 queries/week"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"With RAG"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sonnet: 1.27M tokens/week \xf7 1,141 tokens/query = ",(0,r.jsx)(n.strong,{children:"1,110 queries/week"})]}),"\n",(0,r.jsxs)(n.li,{children:["Opus: 300K tokens/week \xf7 1,141 tokens/query = ",(0,r.jsx)(n.strong,{children:"263 queries/week"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Insight"}),": On Opus without RAG, you can hit your weekly limit in a single intensive coding day. With RAG, you can code all week without worry."]}),"\n",(0,r.jsx)(n.h2,{id:"speed-comparison",children:"Speed Comparison"}),"\n",(0,r.jsx)(n.p,{children:"Claude Code alone: 5-10 seconds (reading 10+ full files)\nClaude Code + RAG: 2-15 seconds (metadata only)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verdict"}),": RAG is generally 2-3x faster, but can occasionally be slower depending on:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Query complexity"}),"\n",(0,r.jsx)(n.li,{children:"Index freshness"}),"\n",(0,r.jsx)(n.li,{children:"Reranking model used"}),"\n",(0,r.jsx)(n.li,{children:"Number of retrieved chunks"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Speed is roughly a wash - the real benefit is token savings."}),"\n",(0,r.jsx)(n.h2,{id:"quality-comparison",children:"Quality Comparison"}),"\n",(0,r.jsx)(n.p,{children:"Both approaches give excellent answers, but for different reasons:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Claude Code Alone"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reads full files for complete context"}),"\n",(0,r.jsx)(n.li,{children:"Strong reasoning over entire codebase"}),"\n",(0,r.jsx)(n.li,{children:"Can miss relevant code in large repos"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Claude Code + RAG"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Semantic search finds relevant code chunks"}),"\n",(0,r.jsx)(n.li,{children:"Works with cheaper models (4o-mini) due to focused context"}),"\n",(0,r.jsx)(n.li,{children:"Quality depends on index freshness and query specificity"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"when-rag-works-better",children:"When RAG Works Better"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Large codebases"})," (>1000 files) - Full file reading becomes impractical"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Specific questions"}),' - "Where is OAuth validated?" vs "Tell me about auth"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-file references"})," - RAG semantic search finds connections"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"using-rag-results-effectively",children:"Using RAG Results Effectively"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Two strategies"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feed answers to Claude"}),": Use ",(0,r.jsx)(n.code,{children:"rag_answer"})," to get context, then ask Claude to implement based on that"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Direct code retrieval"}),": Use ",(0,r.jsx)(n.code,{children:"rag_search"})," to get relevant code chunks without generation - semantic ",(0,r.jsx)(n.code,{children:"grep"})," that understands context"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contributing-benchmarks",children:"Contributing Benchmarks"}),"\n",(0,r.jsx)(n.p,{children:"We need your help testing with different Claude models and tiers!"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Contribution Guide"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/DMontgomery40/agro-rag-engine/blob/main/docs/CONTRIBUTING.md",children:"CONTRIBUTING.md"})]}),"\n",(0,r.jsx)(n.p,{children:"Help us test:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Different Claude models (Haiku, Sonnet, Opus)"}),"\n",(0,r.jsx)(n.li,{children:"Different plan tiers (Free, Pro, API)"}),"\n",(0,r.jsx)(n.li,{children:"Different query types (navigation, implementation, architecture)"}),"\n",(0,r.jsx)(n.li,{children:"Different codebase sizes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Scripts to autorun these tests are available in ",(0,r.jsx)(n.code,{children:"/scripts"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"cost-analysis",children:"Cost Analysis"}),"\n",(0,r.jsx)(n.h3,{id:"cloud-api-costs",children:"Cloud API Costs"}),"\n",(0,r.jsx)(n.p,{children:"For typical usage (1M tokens/month embedding, 500K tokens/month generation):"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Configuration"}),(0,r.jsx)(n.th,{children:"Monthly Cost"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Budget"})," (Gemini free + Flash)"]}),(0,r.jsx)(n.td,{children:"$1-3"}),(0,r.jsx)(n.td,{children:"Prototypes, personal projects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Balanced"})," (OpenAI embeddings + 4o-mini)"]}),(0,r.jsx)(n.td,{children:"$5-15"}),(0,r.jsx)(n.td,{children:"Small teams, moderate usage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Premium"})," (OpenAI + Cohere rerank)"]}),(0,r.jsx)(n.td,{children:"$20-50"}),(0,r.jsx)(n.td,{children:"Production, high quality required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"High-volume"})," (OpenAI + 4o + Cohere)"]}),(0,r.jsx)(n.td,{children:"$100+"}),(0,r.jsx)(n.td,{children:"Enterprise, heavy usage"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"self-hosted-savings",children:"Self-Hosted Savings"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Hardware costs"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Mac M4 Max (32GB): ~$3,000 one-time"}),"\n",(0,r.jsx)(n.li,{children:"NVIDIA RTX 4090 (24GB): ~$1,600 one-time"}),"\n",(0,r.jsx)(n.li,{children:"Cloud GPU (A100): ~$1-3/hour"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Break-even analysis"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"At $50/month API costs: Hardware pays for itself in 5-6 years"}),"\n",(0,r.jsx)(n.li,{children:"At $200/month API costs: Hardware pays for itself in ~1.5 years"}),"\n",(0,r.jsx)(n.li,{children:"At $500/month API costs: Hardware pays for itself in ~6 months"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"hidden-costs",children:"Hidden Costs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Self-hosted considerations"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Electricity (~$10-30/month for 24/7 GPU operation)"}),"\n",(0,r.jsx)(n.li,{children:"Maintenance and updates"}),"\n",(0,r.jsx)(n.li,{children:"Learning curve for model management"}),"\n",(0,r.jsx)(n.li,{children:"Limited to what fits in VRAM/RAM"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cloud API considerations"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Rate limits can be hit unexpectedly"}),"\n",(0,r.jsx)(n.li,{children:"Pricing changes (usually downward, but not guaranteed)"}),"\n",(0,r.jsx)(n.li,{children:"Vendor lock-in"}),"\n",(0,r.jsx)(n.li,{children:"Data leaves your infrastructure"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"optimization-strategies",children:"Optimization Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"1-use-bm25-only-for-development",children:"1. Use BM25-Only for Development"}),"\n",(0,r.jsx)(n.p,{children:"During active development, skip expensive embeddings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export EMBEDDING_TYPE=local\nexport SKIP_DENSE=1\nREPO=agro python index_repo.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Savings"}),": ~90% reduction in indexing cost\n",(0,r.jsx)(n.strong,{children:"Trade-off"}),": Slightly lower quality semantic search"]}),"\n",(0,r.jsx)(n.h3,{id:"2-cache-aggressively",children:"2. Cache Aggressively"}),"\n",(0,r.jsx)(n.p,{children:"AGRO caches by default:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only re-embeds changed files"}),"\n",(0,r.jsx)(n.li,{children:"Stores BM25 indices for instant retrieval"}),"\n",(0,r.jsx)(n.li,{children:"Persists conversation context in Redis"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-right-size-your-models",children:"3. Right-Size Your Models"}),"\n",(0,r.jsx)(n.p,{children:"Don't use GPT-4o if 4o-mini works:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test with mini first\nexport GEN_MODEL=gpt-4o-mini\n\n# Upgrade if quality insufficient\nexport GEN_MODEL=gpt-4o\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-batch-operations",children:"4. Batch Operations"}),"\n",(0,r.jsx)(n.p,{children:"Indexing multiple repos? Do it once:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"for repo in repo1 repo2 repo3; do\n  REPO=$repo python index_repo.py &\ndone\nwait\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-monitor-with-prometheus",children:"5. Monitor with Prometheus"}),"\n",(0,r.jsx)(n.p,{children:"Track costs in real-time:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Visit ",(0,r.jsx)(n.a,{href:"http://localhost:9090",children:"http://localhost:9090"})]}),"\n",(0,r.jsxs)(n.li,{children:["Query: ",(0,r.jsx)(n.code,{children:"rate(agro_cost_usd_total[1h]) * 24"})," for daily cost projection"]}),"\n",(0,r.jsxs)(n.li,{children:["Set up alerts (see ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/configuration/alerting",children:"Alerting"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,r.jsx)(n.h3,{id:"retrieval-performance",children:"Retrieval Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Default settings"})," (balanced):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"BM25_K=20              # Initial BM25 retrieval\nDENSE_K=20             # Initial dense retrieval\nRERANK_TOP_N=10        # Final results after reranking\nMQ_REWRITES=4          # Multi-query expansions\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fast mode"})," (lower quality):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"BM25_K=10\nDENSE_K=0              # Skip dense\nRERANK_TOP_N=5\nMQ_REWRITES=0          # Skip multi-query\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"High quality"})," (slower, more expensive):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"BM25_K=50\nDENSE_K=50\nRERANK_TOP_N=20\nMQ_REWRITES=6\nRERANK_BACKEND=cohere  # Use Cohere rerank-3.5\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generation-performance",children:"Generation Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Models ranked by speed"})," (fastest to slowest):"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Local Qwen3-Coder 7B (~100 tok/s on M4 Max)"}),"\n",(0,r.jsx)(n.li,{children:"GPT-4o-mini (~50-80 tok/s)"}),"\n",(0,r.jsx)(n.li,{children:"Gemini 2.5 Flash (~40-60 tok/s)"}),"\n",(0,r.jsx)(n.li,{children:"GPT-4o (~30-40 tok/s)"}),"\n",(0,r.jsx)(n.li,{children:"Claude Sonnet 4.5 (~25-35 tok/s)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Models ranked by quality"})," (highest to lowest):"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Claude Sonnet 4.5"}),"\n",(0,r.jsx)(n.li,{children:"GPT-4o"}),"\n",(0,r.jsx)(n.li,{children:"Claude Haiku 3.5 / GPT-4o-mini (tie)"}),"\n",(0,r.jsx)(n.li,{children:"Gemini 2.5 Flash"}),"\n",(0,r.jsx)(n.li,{children:"Local Qwen3-Coder 30B"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"monitoring--alerts",children:"Monitoring & Alerts"}),"\n",(0,r.jsx)(n.h3,{id:"key-metrics-to-track",children:"Key Metrics to Track"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cost metrics"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agro_cost_usd_total"})," - Total spend"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rate(agro_cost_usd_total[1h])"})," - Hourly burn rate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rate(agro_tokens_total[1m])"})," - Token consumption rate"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance metrics"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agro_retrieval_latency_seconds"})," - Retrieval time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agro_generation_latency_seconds"})," - Generation time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agro_rerank_score"})," - Quality indicator"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Quality metrics"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eval accuracy (top-1, top-5)"}),"\n",(0,r.jsx)(n.li,{children:"Rerank score distribution"}),"\n",(0,r.jsx)(n.li,{children:"User feedback scores"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setting-up-alerts",children:"Setting Up Alerts"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/configuration/alerting",children:"Alerting Configuration"})," for:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cost burn alerts ($0.10/hour spike)"}),"\n",(0,r.jsx)(n.li,{children:"Token consumption alerts (2000+ tokens/min)"}),"\n",(0,r.jsx)(n.li,{children:"Quality degradation alerts (MRR < 0.6)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"benchmarking-tools",children:"Benchmarking Tools"}),"\n",(0,r.jsx)(n.h3,{id:"run-your-own-tests",children:"Run Your Own Tests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Compare with and without RAG\ncd /path/to/agro-rag-engine/scripts\n\n# Test RAG performance\n./benchmark_rag.sh\n\n# Test without RAG (full file reading)\n./benchmark_no_rag.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"eval-loop",children:"Eval Loop"}),"\n",(0,r.jsx)(n.p,{children:"Track quality over time:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Baseline\npython -m eval.eval_loop --baseline\n\n# After changes\npython -m eval.eval_loop --compare\n"})}),"\n",(0,r.jsx)(n.h2,{id:"real-world-case-study",children:"Real-World Case Study"}),"\n",(0,r.jsx)(n.h3,{id:"orphaned-loop-incident",children:"Orphaned Loop Incident"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What happened"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A background process got stuck calling ",(0,r.jsx)(n.code,{children:"/api/chat"})," every 2 seconds"]}),"\n",(0,r.jsx)(n.li,{children:"Each call reranked 100-200 documents"}),"\n",(0,r.jsx)(n.li,{children:"Each document ~175 tokens \u2192 3,500 tokens/call"}),"\n",(0,r.jsx)(n.li,{children:"Loop ran for 2+ days"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cost impact"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Without monitoring: ~$200-300 wasted"}),"\n",(0,r.jsx)(n.li,{children:"With alerting: Would have fired within 15 minutes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Lesson"}),": Always set up alerts (see ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/configuration/alerting",children:"Alerting"}),")"]}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Model Recommendations"}),": ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/configuration/models",children:"Model Configuration"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Alerting Setup"}),": ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/configuration/alerting",children:"Alerting"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost Estimation API"}),": ",(0,r.jsx)(n.a,{href:"/agro-rag-engine/api/reference#cost--performance",children:"API Reference"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prometheus Dashboard"}),": ",(0,r.jsx)(n.a,{href:"http://localhost:9090",children:"http://localhost:9090"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Last Updated"}),": October 8, 2025\n",(0,r.jsx)(n.strong,{children:"Benchmarks"}),": Subject to change as models evolve"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);